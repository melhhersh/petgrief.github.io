{"version":3,"sources":["webpack:///./node_modules/gatsby-plugin-firebase/src/firebase.js","webpack:///./node_modules/gatsby-plugin-firebase/index.js","webpack:///./node_modules/react-firebase-hooks/database/dist/index.esm.js","webpack:///./src/pages/memorial.js"],"names":["firebase","apps","length","initializeApp","apiKey","process","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","_assign","Object","assign","t","s","i","n","arguments","p","prototype","hasOwnProperty","call","apply","this","snapshotToData","snapshot","keyField","exists","_a","val","Array","isArray","isObject","key","defaultState","defaultValue","loading","value","getDefaultValue","undefined","state","action","type","error","dispatch","reset","setError","setValue","v1","v2","bothNull","equal","isEqual","useIsEqualRef","onChange","ref","current","query","options","on","off","MemorialPage","pets","useObjectVal","database","storageRef","storage","useState","images","setImages","a","urlObj","child","listAll","then","items","temp","map","name","getDownloadURL","result","Promise","all","useEffect","fetchData","title","to","className","keys","pet","style","marginBottom","src","petImageURL","alt","petName","objectFit","fontSize","owner","petBio"],"mappings":"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","file":"component---src-pages-memorial-js-3680dde568eec10c073b.js","sourcesContent":["import firebase from \"firebase/app\";\n\nif (!firebase.apps.length) {\n  firebase.initializeApp({\n    apiKey: process.env.FIREBASE_API_KEY,\n    authDomain: process.env.FIREBASE_AUTH_DOMAIN,\n    databaseURL: process.env.FIREBASE_DATABASE_URL,\n    projectId: process.env.FIREBASE_PROJECT_ID,\n    storageBucket: process.env.FIREBASE_STORAGE_BUCKET,\n    messagingSenderId: process.env.FIREBASE_MESSAGING_SENDER_ID,\n    appId: process.env.FIREBASE_APP_ID,\n    measurementId: process.env.FIREBASE_MEASUREMENT_ID\n  });\n}\n\nexport default firebase;\n","import firebase from \"./src/firebase\";\n\nexport default firebase;\n","import { useReducer, useEffect, useRef, useMemo } from 'react';\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\n\nvar _assign = function __assign() {\n  _assign = Object.assign || function __assign(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) {\n        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n    }\n\n    return t;\n  };\n\n  return _assign.apply(this, arguments);\n};\n\nvar isObject = function isObject(val) {\n  return val != null && typeof val === 'object' && Array.isArray(val) === false;\n};\n\nvar snapshotToData = function snapshotToData(snapshot, keyField) {\n  if (!snapshot.exists) {\n    return undefined;\n  }\n\n  var val = snapshot.val();\n\n  if (isObject(val)) {\n    return _assign({}, val, keyField ? (_a = {}, _a[keyField] = snapshot.key, _a) : null);\n  }\n\n  return val;\n\n  var _a;\n};\n\nvar initialState = {\n  loading: true,\n  value: {\n    keys: [],\n    values: []\n  }\n};\n\nvar listReducer = function listReducer(state, action) {\n  switch (action.type) {\n    case 'add':\n      if (!action.snapshot) {\n        return state;\n      }\n\n      return _assign({}, state, {\n        error: undefined,\n        value: addChild(state.value, action.snapshot, action.previousKey)\n      });\n\n    case 'change':\n      if (!action.snapshot) {\n        return state;\n      }\n\n      return _assign({}, state, {\n        error: undefined,\n        value: changeChild(state.value, action.snapshot)\n      });\n\n    case 'error':\n      return _assign({}, state, {\n        error: action.error,\n        loading: false,\n        value: {\n          keys: undefined,\n          values: undefined\n        }\n      });\n\n    case 'move':\n      if (!action.snapshot) {\n        return state;\n      }\n\n      return _assign({}, state, {\n        error: undefined,\n        value: moveChild(state.value, action.snapshot, action.previousKey)\n      });\n\n    case 'remove':\n      if (!action.snapshot) {\n        return state;\n      }\n\n      return _assign({}, state, {\n        error: undefined,\n        value: removeChild(state.value, action.snapshot)\n      });\n\n    case 'reset':\n      return initialState;\n\n    case 'value':\n      return _assign({}, state, {\n        error: undefined,\n        loading: false\n      });\n\n    case 'empty':\n      return _assign({}, state, {\n        loading: false,\n        value: {\n          keys: undefined,\n          values: undefined\n        }\n      });\n\n    default:\n      return state;\n  }\n};\n\nvar addChild = function addChild(currentState, snapshot, previousKey) {\n  if (!snapshot.key) {\n    return currentState;\n  }\n\n  var keys = currentState.keys,\n      values = currentState.values;\n\n  if (!previousKey) {\n    // The child has been added to the start of the list\n    return {\n      keys: keys ? [snapshot.key].concat(keys) : [snapshot.key],\n      values: values ? [snapshot].concat(values) : [snapshot]\n    };\n  } // Establish the index for the previous child in the list\n\n\n  var index = keys ? keys.indexOf(previousKey) : 0; // Insert the item after the previous child\n\n  return {\n    keys: keys ? keys.slice(0, index + 1).concat([snapshot.key], keys.slice(index + 1)) : [snapshot.key],\n    values: values ? values.slice(0, index + 1).concat([snapshot], values.slice(index + 1)) : [snapshot]\n  };\n};\n\nvar changeChild = function changeChild(currentState, snapshot) {\n  if (!snapshot.key) {\n    return currentState;\n  }\n\n  var keys = currentState.keys,\n      values = currentState.values;\n  var index = keys ? keys.indexOf(snapshot.key) : 0;\n  return _assign({}, currentState, {\n    values: values ? values.slice(0, index).concat([snapshot], values.slice(index + 1)) : [snapshot]\n  });\n};\n\nvar removeChild = function removeChild(currentState, snapshot) {\n  if (!snapshot.key) {\n    return currentState;\n  }\n\n  var keys = currentState.keys,\n      values = currentState.values;\n  var index = keys ? keys.indexOf(snapshot.key) : 0;\n  return {\n    keys: keys ? keys.slice(0, index).concat(keys.slice(index + 1)) : [],\n    values: values ? values.slice(0, index).concat(values.slice(index + 1)) : []\n  };\n};\n\nvar moveChild = function moveChild(currentState, snapshot, previousKey) {\n  // Remove the child from it's previous location\n  var tempValue = removeChild(currentState, snapshot); // Add the child into it's new location\n\n  return addChild(tempValue, snapshot, previousKey);\n};\n\nvar useListReducer = function useListReducer() {\n  return useReducer(listReducer, initialState);\n};\n\nvar defaultState = function defaultState(defaultValue) {\n  return {\n    loading: defaultValue === undefined || defaultValue === null,\n    value: defaultValue\n  };\n};\n\nvar reducer = function reducer() {\n  return function (state, action) {\n    switch (action.type) {\n      case 'error':\n        return _assign({}, state, {\n          error: action.error,\n          loading: false,\n          value: undefined\n        });\n\n      case 'reset':\n        return defaultState(action.defaultValue);\n\n      case 'value':\n        return _assign({}, state, {\n          error: undefined,\n          loading: false,\n          value: action.value\n        });\n\n      default:\n        return state;\n    }\n  };\n};\n\nvar useLoadingValue = function useLoadingValue(getDefaultValue) {\n  var defaultValue = getDefaultValue ? getDefaultValue() : undefined;\n\n  var _a = useReducer(reducer(), defaultState(defaultValue)),\n      state = _a[0],\n      dispatch = _a[1];\n\n  var reset = function reset() {\n    var defaultValue = getDefaultValue ? getDefaultValue() : undefined;\n    dispatch({\n      type: 'reset',\n      defaultValue: defaultValue\n    });\n  };\n\n  var setError = function setError(error) {\n    dispatch({\n      type: 'error',\n      error: error\n    });\n  };\n\n  var setValue = function setValue(value) {\n    dispatch({\n      type: 'value',\n      value: value\n    });\n  };\n\n  return {\n    error: state.error,\n    loading: state.loading,\n    reset: reset,\n    setError: setError,\n    setValue: setValue,\n    value: state.value\n  };\n};\n\nvar useComparatorRef = function useComparatorRef(value, isEqual, onChange) {\n  var ref = useRef(value);\n  useEffect(function () {\n    if (!isEqual(value, ref.current)) {\n      ref.current = value;\n\n      if (onChange) {\n        onChange();\n      }\n    }\n  });\n  return ref;\n};\n\nvar isEqual = function isEqual(v1, v2) {\n  var bothNull = !v1 && !v2;\n  var equal = !!v1 && !!v2 && v1.isEqual(v2);\n  return bothNull || equal;\n};\n\nvar useIsEqualRef = function useIsEqualRef(value, onChange) {\n  return useComparatorRef(value, isEqual, onChange);\n};\n\nvar useList = function useList(query) {\n  var _a = useListReducer(),\n      state = _a[0],\n      dispatch = _a[1];\n\n  var ref = useIsEqualRef(query, function () {\n    return dispatch({\n      type: 'reset'\n    });\n  });\n\n  var onChildAdded = function onChildAdded(snapshot, previousKey) {\n    dispatch({\n      type: 'add',\n      previousKey: previousKey,\n      snapshot: snapshot\n    });\n  };\n\n  var onChildChanged = function onChildChanged(snapshot) {\n    dispatch({\n      type: 'change',\n      snapshot: snapshot\n    });\n  };\n\n  var onChildMoved = function onChildMoved(snapshot, previousKey) {\n    dispatch({\n      type: 'move',\n      previousKey: previousKey,\n      snapshot: snapshot\n    });\n  };\n\n  var onChildRemoved = function onChildRemoved(snapshot) {\n    dispatch({\n      type: 'remove',\n      snapshot: snapshot\n    });\n  };\n\n  var onError = function onError(error) {\n    dispatch({\n      type: 'error',\n      error: error\n    });\n  };\n\n  var onValue = function onValue() {\n    dispatch({\n      type: 'value'\n    });\n  };\n\n  useEffect(function () {\n    var query = ref.current;\n\n    if (!query) {\n      dispatch({\n        type: 'empty'\n      });\n      return;\n    } // This is here to indicate that all the data has been successfully received\n\n\n    query.once('value', onValue, onError);\n    query.on('child_added', onChildAdded, onError);\n    query.on('child_changed', onChildChanged, onError);\n    query.on('child_moved', onChildMoved, onError);\n    query.on('child_removed', onChildRemoved, onError);\n    return function () {\n      query.off('child_added', onChildAdded);\n      query.off('child_changed', onChildChanged);\n      query.off('child_moved', onChildMoved);\n      query.off('child_removed', onChildRemoved);\n    };\n  }, [ref.current]);\n  return [state.value.values, state.loading, state.error];\n};\n\nvar useListKeys = function useListKeys(query) {\n  var _a = useList(query),\n      value = _a[0],\n      loading = _a[1],\n      error = _a[2];\n\n  return [value ? value.map(function (snapshot) {\n    return snapshot.key;\n  }) : undefined, loading, error];\n};\n\nvar useListVals = function useListVals(query, options) {\n  var _a = useList(query),\n      snapshots = _a[0],\n      loading = _a[1],\n      error = _a[2];\n\n  var values = useMemo(function () {\n    return snapshots ? snapshots.map(function (snapshot) {\n      return snapshotToData(snapshot, options ? options.keyField : undefined);\n    }) : undefined;\n  }, [snapshots, options && options.keyField]);\n  return [values, loading, error];\n};\n\nvar useObject = function useObject(query) {\n  var _a = useLoadingValue(),\n      error = _a.error,\n      loading = _a.loading,\n      reset = _a.reset,\n      setError = _a.setError,\n      setValue = _a.setValue,\n      value = _a.value;\n\n  var ref = useIsEqualRef(query, reset);\n  useEffect(function () {\n    var query = ref.current;\n\n    if (!query) {\n      setValue(undefined);\n      return;\n    }\n\n    query.on('value', setValue, setError);\n    return function () {\n      query.off('value', setValue);\n    };\n  }, [ref.current]);\n  return [value, loading, error];\n};\n\nvar useObjectVal = function useObjectVal(query, options) {\n  var _a = useObject(query),\n      snapshot = _a[0],\n      loading = _a[1],\n      error = _a[2];\n\n  var value = useMemo(function () {\n    return snapshot ? snapshotToData(snapshot, options ? options.keyField : undefined) : undefined;\n  }, [snapshot, options && options.keyField]);\n  return [value, loading, error];\n};\n\nexport { useList, useListKeys, useListVals, useObject, useObjectVal };","// import React from \"react\"\n\n// import Layout from \"../components/layout\"\n// import SEO from \"../components/seo\"\n\n// const MemorialPage = () => (\n//   <Layout>\n//     <SEO title=\"Memorial Page\" />\n//     <h1>Pet Memorial</h1>\n//     <p> This page will be devoted to your pets.  Check back soon for more details.</p>\n//   </Layout>\n// )\n\n// export default MemorialPage\n\n\nimport React, {useEffect, useState} from \"react\"\nimport firebase from \"gatsby-plugin-firebase\";\nimport Layout from \"../components/layout\"\nimport SEO from \"../components/seo\"\nimport { useObjectVal } from \"react-firebase-hooks/database\"\nimport { Link } from \"gatsby\"\n\nfunction MemorialPage(){\n  const [pets] = useObjectVal(firebase.database().ref(\"/\"))\n  const storageRef = firebase.storage().ref();\n  const [images, setImages] = useState({})\n\n\n  async function fetchData() {\n    const urlObj = {}\n    let temp;\n    await storageRef.child('images/').listAll().then(({items}) => {\n      temp = items.map(async ({name}) => {\n        return await storageRef.child(`images/${name}`).getDownloadURL().then((result) => {\n          urlObj[name] = result\n        })\n      })\n    })\n    await Promise.all(temp);\n    setImages(urlObj);\n}\n\n  useEffect(() => {\n    fetchData();\n  })\n \nreturn (\n  <Layout>\n    <SEO title=\"Memorial Page\" />\n      <h1>Memorial</h1>\n      <h4> \n        <Link to=\"/addToMemorial/\">Click here to add to memorial page</Link> \n      </h4>\n<div className=\"columns is-multiline\">\n\n  {pets && Object.keys(pets).map(pet => {\n    return (\n      <div className=\"column is-half\" key={pet}>\n        <div className=\"card\">\n          <div className=\"card-image\">\n            <figure className=\"image is-4by3\" style={{marginBottom: 0}}>\n              <img src={images[pets[pet].petImageURL]} alt={pets[pet].petName} style={{objectFit: 'contain'}}/>\n            </figure>\n          </div>\n          <div className=\"card-content\">\n            <div className=\"media\">\n              <div className=\"media-content\">\n                <p className=\"title is-6\">{pets[pet].petName}</p>\n                <p className=\"subtitle is-6\"  style={{marginBottom: 0, fontSize: '.75rem'}}>Owner(s): {pets[pet].owner}</p>\n              </div>\n            </div>\n\n            <div className=\"content\">\n              <p style={{fontSize: '.75rem'}}>{pets[pet].petBio}</p>\n            </div>\n          </div>\n        </div>\n      </div>\n      )\n  })}\n  </div>\n</Layout>\n)} \n\nexport default MemorialPage\n"],"sourceRoot":""}