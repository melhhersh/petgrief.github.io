/*! For license information please see d4edeabb-1656f17c8d6b64a2d6f2.js.LICENSE.txt */
(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{5550:function(e,t,r){"use strict";var n,a=r("ReuC"),i=r("JX7q"),s=r("Ji7U"),o=r("md7G"),u=r("foSv"),c=r("ODXe"),l=r("HaE+"),h=r("1OyB"),p=r("vuIU"),f=r("KQm4"),d=r("rePB"),v=(r("ToJy"),r("p532"),r("E9XD"),r("o0o1")),b=r.n(v),k=r("H9WU"),m=r("WJvL"),y=r("teXz"),g=r("5pEQ"),O=r("IuUc");function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Object(u.a)(e);if(t){var a=Object(u.a)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Object(o.a)(this,r)}}function w(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return I(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return I(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,o=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){o=!0,i=e},f:function(){try{s||null==r.return||r.return()}finally{if(o)throw i}}}}function I(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function j(){return Object(d.a)({},"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.")}var T=j,x=new k.b("auth","Firebase",j()),S=new g.b("@firebase/auth");function R(e){if(S.logLevel<=g.a.ERROR){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];S.error.apply(S,["Auth (".concat(m.a,"): ").concat(e)].concat(r))}}function E(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];throw A.apply(void 0,[e].concat(r))}function N(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return A.apply(void 0,[e].concat(r))}function P(e,t,r){var n=Object.assign(Object.assign({},T()),Object(d.a)({},t,r));return new k.b("auth","Firebase",n).create(t,{appName:e.name})}function A(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];if("string"!=typeof e){var a,i=r[0],s=Object(f.a)(r.slice(1));return s[0]&&(s[0].appName=e.name),(a=e._errorFactory).create.apply(a,[i].concat(Object(f.a)(s)))}return x.create.apply(x,[e].concat(r))}function C(e,t){if(!e){for(var r=arguments.length,n=new Array(r>2?r-2:0),a=2;a<r;a++)n[a-2]=arguments[a];throw A.apply(void 0,[t].concat(n))}}function L(e){var t="INTERNAL ASSERTION FAILED: "+e;throw R(t),new Error(t)}function M(e,t){e||L(t)}var D=new Map;function U(e){M(e instanceof Function,"Expected a class definition");var t=D.get(e);return t?(M(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,D.set(e,t),t)}function F(){return"http:"===V()||"https:"===V()}function V(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}var W=function(){function e(t,r){Object(h.a)(this,e),this.shortDelay=t,this.longDelay=r,M(r>t,"Short delay should be less than long delay!"),this.isMobile=Object(k.y)()||Object(k.A)()}return Object(p.a)(e,[{key:"get",value:function(){return"undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(F()||Object(k.u)()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}]),e}();function z(e,t){M(e.emulator,"Emulator should always be set here");var r=e.emulator.url;return t?"".concat(r).concat(t.startsWith("/")?t.slice(1):t):r}var q=function(){function e(){Object(h.a)(this,e)}return Object(p.a)(e,null,[{key:"initialize",value:function(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}},{key:"fetch",value:function(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void L("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"headers",value:function(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void L("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"response",value:function(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void L("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}]),e}(),H=(n={},Object(d.a)(n,"CREDENTIAL_MISMATCH","custom-token-mismatch"),Object(d.a)(n,"MISSING_CUSTOM_TOKEN","internal-error"),Object(d.a)(n,"INVALID_IDENTIFIER","invalid-email"),Object(d.a)(n,"MISSING_CONTINUE_URI","internal-error"),Object(d.a)(n,"INVALID_PASSWORD","wrong-password"),Object(d.a)(n,"MISSING_PASSWORD","internal-error"),Object(d.a)(n,"EMAIL_EXISTS","email-already-in-use"),Object(d.a)(n,"PASSWORD_LOGIN_DISABLED","operation-not-allowed"),Object(d.a)(n,"INVALID_IDP_RESPONSE","invalid-credential"),Object(d.a)(n,"INVALID_PENDING_TOKEN","invalid-credential"),Object(d.a)(n,"FEDERATED_USER_ID_ALREADY_LINKED","credential-already-in-use"),Object(d.a)(n,"MISSING_REQ_TYPE","internal-error"),Object(d.a)(n,"EMAIL_NOT_FOUND","user-not-found"),Object(d.a)(n,"RESET_PASSWORD_EXCEED_LIMIT","too-many-requests"),Object(d.a)(n,"EXPIRED_OOB_CODE","expired-action-code"),Object(d.a)(n,"INVALID_OOB_CODE","invalid-action-code"),Object(d.a)(n,"MISSING_OOB_CODE","internal-error"),Object(d.a)(n,"CREDENTIAL_TOO_OLD_LOGIN_AGAIN","requires-recent-login"),Object(d.a)(n,"INVALID_ID_TOKEN","invalid-user-token"),Object(d.a)(n,"TOKEN_EXPIRED","user-token-expired"),Object(d.a)(n,"USER_NOT_FOUND","user-token-expired"),Object(d.a)(n,"TOO_MANY_ATTEMPTS_TRY_LATER","too-many-requests"),Object(d.a)(n,"INVALID_CODE","invalid-verification-code"),Object(d.a)(n,"INVALID_SESSION_INFO","invalid-verification-id"),Object(d.a)(n,"INVALID_TEMPORARY_PROOF","invalid-credential"),Object(d.a)(n,"MISSING_SESSION_INFO","missing-verification-id"),Object(d.a)(n,"SESSION_EXPIRED","code-expired"),Object(d.a)(n,"MISSING_ANDROID_PACKAGE_NAME","missing-android-pkg-name"),Object(d.a)(n,"UNAUTHORIZED_DOMAIN","unauthorized-continue-uri"),Object(d.a)(n,"INVALID_OAUTH_CLIENT_ID","invalid-oauth-client-id"),Object(d.a)(n,"ADMIN_ONLY_OPERATION","admin-restricted-operation"),Object(d.a)(n,"INVALID_MFA_PENDING_CREDENTIAL","invalid-multi-factor-session"),Object(d.a)(n,"MFA_ENROLLMENT_NOT_FOUND","multi-factor-info-not-found"),Object(d.a)(n,"MISSING_MFA_ENROLLMENT_ID","missing-multi-factor-info"),Object(d.a)(n,"MISSING_MFA_PENDING_CREDENTIAL","missing-multi-factor-session"),Object(d.a)(n,"SECOND_FACTOR_EXISTS","second-factor-already-in-use"),Object(d.a)(n,"SECOND_FACTOR_LIMIT_EXCEEDED","maximum-second-factor-count-exceeded"),Object(d.a)(n,"BLOCKING_FUNCTION_ERROR_RESPONSE","internal-error"),n),J=new W(3e4,6e4);function K(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}function G(e,t,r,n){return B.apply(this,arguments)}function B(){return(B=Object(l.a)(b.a.mark((function e(t,r,n,a){var i,s=arguments;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=s.length>4&&void 0!==s[4]?s[4]:{},e.abrupt("return",X(t,i,Object(l.a)(b.a.mark((function e(){var i,s,o,u;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i={},s={},a&&("GET"===r?s=a:i={body:JSON.stringify(a)}),o=Object(k.E)(Object.assign({key:t.config.apiKey},s)).slice(1),e.next=6,t._getAdditionalHeaders();case 6:return(u=e.sent)["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode),e.abrupt("return",q.fetch()($(t,t.config.apiHost,n,o),Object.assign({method:r,headers:u,referrerPolicy:"no-referrer"},i)));case 10:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function X(e,t,r){return Y.apply(this,arguments)}function Y(){return(Y=Object(l.a)(b.a.mark((function e(t,r,n){var a,i,s,o,u,l,h,p,f,d;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._canInitEmulator=!1,a=Object.assign(Object.assign({},H),r),e.prev=2,i=new ee(t),e.next=6,Promise.race([n(),i.promise]);case 6:return s=e.sent,i.clearNetworkTimeout(),e.next=10,s.json();case 10:if(!("needConfirmation"in(o=e.sent))){e.next=13;break}throw te(t,"account-exists-with-different-credential",o);case 13:if(!s.ok||"errorMessage"in o){e.next=17;break}return e.abrupt("return",o);case 17:if(u=s.ok?o.errorMessage:o.error.message,l=u.split(" : "),h=Object(c.a)(l,2),p=h[0],f=h[1],"FEDERATED_USER_ID_ALREADY_LINKED"!==p){e.next=23;break}throw te(t,"credential-already-in-use",o);case 23:if("EMAIL_EXISTS"!==p){e.next=27;break}throw te(t,"email-already-in-use",o);case 27:if("USER_DISABLED"!==p){e.next=29;break}throw te(t,"user-disabled",o);case 29:if(d=a[p]||p.toLowerCase().replace(/[_\s]+/g,"-"),!f){e.next=34;break}throw P(t,d,f);case 34:E(t,d);case 35:e.next=42;break;case 37:if(e.prev=37,e.t0=e.catch(2),!(e.t0 instanceof k.c)){e.next=41;break}throw e.t0;case 41:E(t,"network-request-failed");case 42:case"end":return e.stop()}}),e,null,[[2,37]])})))).apply(this,arguments)}function Q(e,t,r,n){return Z.apply(this,arguments)}function Z(){return(Z=Object(l.a)(b.a.mark((function e(t,r,n,a){var i,s,o=arguments;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=o.length>4&&void 0!==o[4]?o[4]:{},e.next=3,G(t,r,n,a,i);case 3:return"mfaPendingCredential"in(s=e.sent)&&E(t,"multi-factor-auth-required",{_serverResponse:s}),e.abrupt("return",s);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $(e,t,r,n){var a="".concat(t).concat(r,"?").concat(n);return e.config.emulator?z(e.config,a):"".concat(e.config.apiScheme,"://").concat(a)}var ee=function(){function e(t){var r=this;Object(h.a)(this,e),this.auth=t,this.timer=null,this.promise=new Promise((function(e,t){r.timer=setTimeout((function(){return t(N(r.auth,"network-request-failed"))}),J.get())}))}return Object(p.a)(e,[{key:"clearNetworkTimeout",value:function(){clearTimeout(this.timer)}}]),e}();function te(e,t,r){var n={appName:e.name};r.email&&(n.email=r.email),r.phoneNumber&&(n.phoneNumber=r.phoneNumber);var a=N(e,t,n);return a.customData._tokenResponse=r,a}function re(e,t){return ne.apply(this,arguments)}function ne(){return(ne=Object(l.a)(b.a.mark((function e(t,r){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",G(t,"POST","/v1/accounts:delete",r));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ae(e,t){return ie.apply(this,arguments)}function ie(){return(ie=Object(l.a)(b.a.mark((function e(t,r){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",G(t,"POST","/v1/accounts:lookup",r));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function se(e){if(e)try{var t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(r){}}function oe(){return(oe=Object(l.a)(b.a.mark((function e(t){var r,n,a,i,s,o,u=arguments;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]&&u[1],n=Object(k.r)(t),e.next=4,n.getIdToken(r);case 4:return a=e.sent,C((i=ce(a))&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error"),s="object"==typeof i.firebase?i.firebase:void 0,o=null==s?void 0:s.sign_in_provider,e.abrupt("return",{claims:i,token:a,authTime:se(ue(i.auth_time)),issuedAtTime:se(ue(i.iat)),expirationTime:se(ue(i.exp)),signInProvider:o||null,signInSecondFactor:(null==s?void 0:s.sign_in_second_factor)||null});case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ue(e){return 1e3*Number(e)}function ce(e){var t,r=e.split("."),n=Object(c.a)(r,3),a=n[0],i=n[1],s=n[2];if(void 0===a||void 0===i||void 0===s)return R("JWT malformed, contained fewer than 3 sections"),null;try{var o=Object(k.h)(i);return o?JSON.parse(o):(R("Failed to decode base64 JWT payload"),null)}catch(u){return R("Caught error parsing JWT payload as JSON",null===(t=u)||void 0===t?void 0:t.toString()),null}}function le(e,t){return he.apply(this,arguments)}function he(){return(he=Object(l.a)(b.a.mark((function e(t,r){var n=arguments;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n.length>2&&void 0!==n[2]&&n[2])){e.next=3;break}return e.abrupt("return",r);case 3:return e.prev=3,e.next=6,r;case 6:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(3),!(e.t0 instanceof k.c&&pe(e.t0))){e.next=15;break}if(t.auth.currentUser!==t){e.next=15;break}return e.next=15,t.auth.signOut();case 15:throw e.t0;case 16:case"end":return e.stop()}}),e,null,[[3,9]])})))).apply(this,arguments)}function pe(e){var t=e.code;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}var fe=function(){function e(t){Object(h.a)(this,e),this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}var t;return Object(p.a)(e,[{key:"_start",value:function(){this.isRunning||(this.isRunning=!0,this.schedule())}},{key:"_stop",value:function(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}},{key:"getInterval",value:function(e){var t;if(e){var r=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),r}this.errorBackoff=3e4;var n=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,n)}},{key:"schedule",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isRunning){var r=this.getInterval(t);this.timerId=setTimeout(Object(l.a)(b.a.mark((function t(){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.iteration();case 2:case"end":return t.stop()}}),t)}))),r)}}},{key:"iteration",value:(t=Object(l.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.user.getIdToken(!0);case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),(null===(t=e.t0)||void 0===t?void 0:t.code)==="auth/".concat("network-request-failed")&&this.schedule(!0),e.abrupt("return");case 9:this.schedule();case 10:case"end":return e.stop()}}),e,this,[[0,5]])}))),function(){return t.apply(this,arguments)})}]),e}(),de=function(){function e(t,r){Object(h.a)(this,e),this.createdAt=t,this.lastLoginAt=r,this._initializeTime()}return Object(p.a)(e,[{key:"_initializeTime",value:function(){this.lastSignInTime=se(this.lastLoginAt),this.creationTime=se(this.createdAt)}},{key:"_copy",value:function(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}},{key:"toJSON",value:function(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}]),e}();function ve(e){return be.apply(this,arguments)}function be(){return(be=Object(l.a)(b.a.mark((function e(t){var r,n,a,i,s,o,u,c,l,h,p;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.auth,e.next=3,t.getIdToken();case 3:return a=e.sent,e.next=6,le(t,ae(n,{idToken:a}));case 6:C(null==(i=e.sent)?void 0:i.users.length,n,"internal-error"),s=i.users[0],t._notifyReloadListener(s),o=(null===(r=s.providerUserInfo)||void 0===r?void 0:r.length)?ye(s.providerUserInfo):[],u=me(t.providerData,o),c=t.isAnonymous,l=!(t.email&&s.passwordHash||(null==u?void 0:u.length)),h=!!c&&l,p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:u,metadata:new de(s.createdAt,s.lastLoginAt),isAnonymous:h},Object.assign(t,p);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ke(){return(ke=Object(l.a)(b.a.mark((function e(t){var r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object(k.r)(t),e.next=3,ve(r);case 3:return e.next=5,r.auth._persistUserIfCurrent(r);case 5:r.auth._notifyListenersIfCurrent(r);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function me(e,t){var r=e.filter((function(e){return!t.some((function(t){return t.providerId===e.providerId}))}));return[].concat(Object(f.a)(r),Object(f.a)(t))}function ye(e){return e.map((function(e){var t=e.providerId,r=Object(y.a)(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}}))}function ge(e,t){return Oe.apply(this,arguments)}function Oe(){return(Oe=Object(l.a)(b.a.mark((function e(t,r){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,X(t,{},Object(l.a)(b.a.mark((function e(){var n,a,i,s,o,u;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(k.E)({grant_type:"refresh_token",refresh_token:r}).slice(1),a=t.config,i=a.tokenApiHost,s=a.apiKey,o=$(t,i,"/v1/token","key=".concat(s)),e.next=5,t._getAdditionalHeaders();case 5:return(u=e.sent)["Content-Type"]="application/x-www-form-urlencoded",e.abrupt("return",q.fetch()(o,{method:"POST",headers:u,body:n}));case 8:case"end":return e.stop()}}),e)}))));case 2:return n=e.sent,e.abrupt("return",{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var _e=function(){function e(){Object(h.a)(this,e),this.refreshToken=null,this.accessToken=null,this.expirationTime=null}var t,r;return Object(p.a)(e,[{key:"isExpired",get:function(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}},{key:"updateFromServerResponse",value:function(e){C(e.idToken,"internal-error"),C(void 0!==e.idToken,"internal-error"),C(void 0!==e.refreshToken,"internal-error");var t,r,n="expiresIn"in e&&void 0!==e.expiresIn?Number(e.expiresIn):(t=e.idToken,C(r=ce(t),"internal-error"),C(void 0!==r.exp,"internal-error"),C(void 0!==r.iat,"internal-error"),Number(r.exp)-Number(r.iat));this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}},{key:"getToken",value:(r=Object(l.a)(b.a.mark((function e(t){var r,n=arguments;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.length>1&&void 0!==n[1]&&n[1],C(!this.accessToken||this.refreshToken,t,"user-token-expired"),r||!this.accessToken||this.isExpired){e.next=4;break}return e.abrupt("return",this.accessToken);case 4:if(!this.refreshToken){e.next=8;break}return e.next=7,this.refresh(t,this.refreshToken);case 7:return e.abrupt("return",this.accessToken);case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"clearRefreshToken",value:function(){this.refreshToken=null}},{key:"refresh",value:(t=Object(l.a)(b.a.mark((function e(t,r){var n,a,i,s;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ge(t,r);case 2:n=e.sent,a=n.accessToken,i=n.refreshToken,s=n.expiresIn,this.updateTokensAndExpiration(a,i,Number(s));case 7:case"end":return e.stop()}}),e,this)}))),function(e,r){return t.apply(this,arguments)})},{key:"updateTokensAndExpiration",value:function(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*r}},{key:"toJSON",value:function(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}},{key:"_assign",value:function(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}},{key:"_clone",value:function(){return Object.assign(new e,this.toJSON())}},{key:"_performRefresh",value:function(){return L("not implemented")}}],[{key:"fromJSON",value:function(t,r){var n=r.refreshToken,a=r.accessToken,i=r.expirationTime,s=new e;return n&&(C("string"==typeof n,"internal-error",{appName:t}),s.refreshToken=n),a&&(C("string"==typeof a,"internal-error",{appName:t}),s.accessToken=a),i&&(C("number"==typeof i,"internal-error",{appName:t}),s.expirationTime=i),s}}]),e}();function we(e,t){C("string"==typeof e||void 0===e,"internal-error",{appName:t})}var Ie=function(){function e(t){Object(h.a)(this,e);var r=t.uid,n=t.auth,a=t.stsTokenManager,i=Object(y.a)(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new fe(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=r,this.auth=n,this.stsTokenManager=a,this.accessToken=a.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?Object(f.a)(i.providerData):[],this.metadata=new de(i.createdAt||void 0,i.lastLoginAt||void 0)}var t,r,n,a;return Object(p.a)(e,[{key:"getIdToken",value:(a=Object(l.a)(b.a.mark((function e(t){var r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,le(this,this.stsTokenManager.getToken(this.auth,t));case 2:if(C(r=e.sent,this.auth,"internal-error"),this.accessToken===r){e.next=9;break}return this.accessToken=r,e.next=8,this.auth._persistUserIfCurrent(this);case 8:this.auth._notifyListenersIfCurrent(this);case 9:return e.abrupt("return",r);case 10:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})},{key:"getIdTokenResult",value:function(e){return function(e){return oe.apply(this,arguments)}(this,e)}},{key:"reload",value:function(){return function(e){return ke.apply(this,arguments)}(this)}},{key:"_assign",value:function(e){this!==e&&(C(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((function(e){return Object.assign({},e)})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}},{key:"_clone",value:function(t){return new e(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}))}},{key:"_onReload",value:function(e){C(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}},{key:"_notifyReloadListener",value:function(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}},{key:"_startProactiveRefresh",value:function(){this.proactiveRefresh._start()}},{key:"_stopProactiveRefresh",value:function(){this.proactiveRefresh._stop()}},{key:"_updateTokensIfNecessary",value:(n=Object(l.a)(b.a.mark((function e(t){var r,n,a=arguments;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=a.length>1&&void 0!==a[1]&&a[1],n=!1,t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),n=!0),!r){e.next=6;break}return e.next=6,ve(this);case 6:return e.next=8,this.auth._persistUserIfCurrent(this);case 8:n&&this.auth._notifyListenersIfCurrent(this);case 9:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"delete",value:(r=Object(l.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getIdToken();case 2:return t=e.sent,e.next=5,le(this,re(this.auth,{idToken:t}));case 5:return this.stsTokenManager.clearRefreshToken(),e.abrupt("return",this.auth.signOut());case 7:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"toJSON",value:function(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((function(e){return Object.assign({},e)})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}},{key:"refreshToken",get:function(){return this.stsTokenManager.refreshToken||""}}],[{key:"_fromJSON",value:function(t,r){var n,a,i,s,o,u,c,l,h=null!==(n=r.displayName)&&void 0!==n?n:void 0,p=null!==(a=r.email)&&void 0!==a?a:void 0,f=null!==(i=r.phoneNumber)&&void 0!==i?i:void 0,d=null!==(s=r.photoURL)&&void 0!==s?s:void 0,v=null!==(o=r.tenantId)&&void 0!==o?o:void 0,b=null!==(u=r._redirectEventId)&&void 0!==u?u:void 0,k=null!==(c=r.createdAt)&&void 0!==c?c:void 0,m=null!==(l=r.lastLoginAt)&&void 0!==l?l:void 0,y=r.uid,g=r.emailVerified,O=r.isAnonymous,_=r.providerData,w=r.stsTokenManager;C(y&&w,t,"internal-error");var I=_e.fromJSON(this.name,w);C("string"==typeof y,t,"internal-error"),we(h,t.name),we(p,t.name),C("boolean"==typeof g,t,"internal-error"),C("boolean"==typeof O,t,"internal-error"),we(f,t.name),we(d,t.name),we(v,t.name),we(b,t.name),we(k,t.name),we(m,t.name);var j=new e({uid:y,auth:t,email:p,emailVerified:g,displayName:h,isAnonymous:O,photoURL:d,phoneNumber:f,tenantId:v,stsTokenManager:I,createdAt:k,lastLoginAt:m});return _&&Array.isArray(_)&&(j.providerData=_.map((function(e){return Object.assign({},e)}))),b&&(j._redirectEventId=b),j}},{key:"_fromIdTokenResponse",value:(t=Object(l.a)(b.a.mark((function t(r,n){var a,i,s,o=arguments;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=o.length>2&&void 0!==o[2]&&o[2],(i=new _e).updateFromServerResponse(n),s=new e({uid:n.localId,auth:r,stsTokenManager:i,isAnonymous:a}),t.next=6,ve(s);case 6:return t.abrupt("return",s);case 7:case"end":return t.stop()}}),t)}))),function(e,r){return t.apply(this,arguments)})}]),e}(),je=function(){function e(){Object(h.a)(this,e),this.type="NONE",this.storage={}}var t,r,n,a;return Object(p.a)(e,[{key:"_isAvailable",value:(a=Object(l.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)}))),function(){return a.apply(this,arguments)})},{key:"_set",value:(n=Object(l.a)(b.a.mark((function e(t,r){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.storage[t]=r;case 1:case"end":return e.stop()}}),e,this)}))),function(e,t){return n.apply(this,arguments)})},{key:"_get",value:(r=Object(l.a)(b.a.mark((function e(t){var r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.storage[t],e.abrupt("return",void 0===r?null:r);case 2:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"_remove",value:(t=Object(l.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:delete this.storage[t];case 1:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),e}();je.type="NONE";var Te=je;function xe(e,t,r){return"firebase".concat(":",e,":").concat(t,":").concat(r)}var Se=function(){function e(t,r,n){Object(h.a)(this,e),this.persistence=t,this.auth=r,this.userKey=n;var a=this.auth,i=a.config,s=a.name;this.fullUserKey=xe(this.userKey,i.apiKey,s),this.fullPersistenceKey=xe("persistence",i.apiKey,s),this.boundEventHandler=r._onStorageEvent.bind(r),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}var t,r,n;return Object(p.a)(e,[{key:"setCurrentUser",value:function(e){return this.persistence._set(this.fullUserKey,e.toJSON())}},{key:"getCurrentUser",value:(n=Object(l.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.persistence._get(this.fullUserKey);case 2:return t=e.sent,e.abrupt("return",t?Ie._fromJSON(this.auth,t):null);case 4:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"removeCurrentUser",value:function(){return this.persistence._remove(this.fullUserKey)}},{key:"savePersistenceForRedirect",value:function(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}},{key:"setPersistence",value:(r=Object(l.a)(b.a.mark((function e(t){var r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.persistence!==t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.getCurrentUser();case 4:return r=e.sent,e.next=7,this.removeCurrentUser();case 7:if(this.persistence=t,!r){e.next=10;break}return e.abrupt("return",this.setCurrentUser(r));case 10:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"delete",value:function(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}}],[{key:"create",value:(t=Object(l.a)(b.a.mark((function t(r,n){var a,i,s,o,u,c,h,p,f,d,v,k=arguments;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=k.length>2&&void 0!==k[2]?k[2]:"authUser",n.length){t.next=3;break}return t.abrupt("return",new e(U(Te),r,a));case 3:return t.next=5,Promise.all(n.map(function(){var e=Object(l.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._isAvailable();case 2:if(!e.sent){e.next=4;break}return e.abrupt("return",t);case 4:return e.abrupt("return",void 0);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:i=t.sent.filter((function(e){return e})),s=i[0]||U(Te),o=xe(a,r.config.apiKey,r.name),u=null,c=w(n),t.prev=10,c.s();case 12:if((h=c.n()).done){t.next=29;break}return p=h.value,t.prev=14,t.next=17,p._get(o);case 17:if(!(f=t.sent)){t.next=23;break}return d=Ie._fromJSON(r,f),p!==s&&(u=d),s=p,t.abrupt("break",29);case 23:t.next=27;break;case 25:t.prev=25,t.t0=t.catch(14);case 27:t.next=12;break;case 29:t.next=34;break;case 31:t.prev=31,t.t1=t.catch(10),c.e(t.t1);case 34:return t.prev=34,c.f(),t.finish(34);case 37:if(v=i.filter((function(e){return e._shouldAllowMigration})),s._shouldAllowMigration&&v.length){t.next=40;break}return t.abrupt("return",new e(s,r,a));case 40:if(s=v[0],!u){t.next=44;break}return t.next=44,s._set(o,u.toJSON());case 44:return t.next=46,Promise.all(n.map(function(){var e=Object(l.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t===s){e.next=8;break}return e.prev=1,e.next=4,t._remove(o);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()));case 46:return t.abrupt("return",new e(s,r,a));case 47:case"end":return t.stop()}}),t,null,[[10,31,34,37],[14,25]])}))),function(e,r){return t.apply(this,arguments)})}]),e}();function Re(e){var t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Ae(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Ee(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Le(t))return"Blackberry";if(Me(t))return"Webos";if(Ne(t))return"Safari";if((t.includes("chrome/")||Pe(t))&&!t.includes("edge/"))return"Chrome";if(Ce(t))return"Android";var r=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);return 2===(null==r?void 0:r.length)?r[1]:"Other"}function Ee(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(k.s)();return/firefox\//i.test(e)}function Ne(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(k.s)(),t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function Pe(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(k.s)();return/crios\//i.test(e)}function Ae(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(k.s)();return/iemobile/i.test(e)}function Ce(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(k.s)();return/android/i.test(e)}function Le(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(k.s)();return/blackberry/i.test(e)}function Me(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(k.s)();return/webos/i.test(e)}function De(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(k.s)();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Ue(){return Object(k.w)()&&10===document.documentMode}function Fe(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(k.s)();return De(e)||Ce(e)||Me(e)||Le(e)||/windows phone/i.test(e)||Ae(e)}function Ve(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=Re(Object(k.s)());break;case"Worker":t="".concat(Re(Object(k.s)()),"-").concat(e);break;default:t=e}var n=r.length?r.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(m.a,"/").concat(n)}var We=function(){function e(t){Object(h.a)(this,e),this.auth=t,this.queue=[]}var t;return Object(p.a)(e,[{key:"pushCallback",value:function(e,t){var r=this,n=function(t){return new Promise((function(r,n){try{r(e(t))}catch(a){n(a)}}))};n.onAbort=t,this.queue.push(n);var a=this.queue.length-1;return function(){r.queue[a]=function(){return Promise.resolve()}}}},{key:"runMiddleware",value:(t=Object(l.a)(b.a.mark((function e(t){var r,n,a,i,s,o,u,c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.auth.currentUser!==t){e.next=2;break}return e.abrupt("return");case 2:n=[],e.prev=3,a=w(this.queue),e.prev=5,a.s();case 7:if((i=a.n()).done){e.next=14;break}return s=i.value,e.next=11,s(t);case 11:s.onAbort&&n.push(s.onAbort);case 12:e.next=7;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(5),a.e(e.t0);case 19:return e.prev=19,a.f(),e.finish(19);case 22:e.next=30;break;case 24:e.prev=24,e.t1=e.catch(3),n.reverse(),o=w(n);try{for(o.s();!(u=o.n()).done;){c=u.value;try{c()}catch(l){}}}catch(h){o.e(h)}finally{o.f()}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===(r=e.t1)||void 0===r?void 0:r.message});case 30:case"end":return e.stop()}}),e,this,[[3,24],[5,16,19,22]])}))),function(e){return t.apply(this,arguments)})}]),e}(),ze=function(){function e(t,r,n){Object(h.a)(this,e),this.app=t,this.heartbeatServiceProvider=r,this.config=n,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new He(this),this.idTokenSubscription=new He(this),this.beforeStateQueue=new We(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=x,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=n.sdkClientVersion}var t,r,n,a,i,s,o,u,c,f,v,m,y,g;return Object(p.a)(e,[{key:"_initializeWithPersistence",value:function(e,t){var r=this;return t&&(this._popupRedirectResolver=U(t)),this._initializationPromise=this.queue(Object(l.a)(b.a.mark((function n(){var a,i;return b.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!r._deleted){n.next=2;break}return n.abrupt("return");case 2:return n.next=4,Se.create(r,e);case 4:if(r.persistenceManager=n.sent,!r._deleted){n.next=7;break}return n.abrupt("return");case 7:if(!(null===(a=r._popupRedirectResolver)||void 0===a?void 0:a._shouldInitProactively)){n.next=15;break}return n.prev=8,n.next=11,r._popupRedirectResolver._initialize(r);case 11:n.next=15;break;case 13:n.prev=13,n.t0=n.catch(8);case 15:return n.next=17,r.initializeCurrentUser(t);case 17:if(r.lastNotifiedUid=(null===(i=r.currentUser)||void 0===i?void 0:i.uid)||null,!r._deleted){n.next=20;break}return n.abrupt("return");case 20:r._isInitialized=!0;case 21:case"end":return n.stop()}}),n,null,[[8,13]])})))),this._initializationPromise}},{key:"_onStorageEvent",value:(g=Object(l.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._deleted){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.assertedPersistence.getCurrentUser();case 4:if(t=e.sent,this.currentUser||t){e.next=7;break}return e.abrupt("return");case 7:if(!this.currentUser||!t||this.currentUser.uid!==t.uid){e.next=12;break}return this._currentUser._assign(t),e.next=11,this.currentUser.getIdToken();case 11:return e.abrupt("return");case 12:return e.next=14,this._updateCurrentUser(t,!0);case 14:case"end":return e.stop()}}),e,this)}))),function(){return g.apply(this,arguments)})},{key:"initializeCurrentUser",value:(y=Object(l.a)(b.a.mark((function e(t){var r,n,a,i,s,o,u;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.assertedPersistence.getCurrentUser();case 2:if(n=e.sent,a=n,i=!1,!t||!this.config.authDomain){e.next=14;break}return e.next=8,this.getOrInitRedirectPersistenceManager();case 8:return s=null===(r=this.redirectUser)||void 0===r?void 0:r._redirectEventId,o=null==a?void 0:a._redirectEventId,e.next=12,this.tryRedirectSignIn(t);case 12:u=e.sent,s&&s!==o||!(null==u?void 0:u.user)||(a=u.user,i=!0);case 14:if(a){e.next=16;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 16:if(a._redirectEventId){e.next=32;break}if(!i){e.next=27;break}return e.prev=18,e.next=21,this.beforeStateQueue.runMiddleware(a);case 21:e.next=27;break;case 23:e.prev=23,e.t0=e.catch(18),a=n,this._popupRedirectResolver._overrideRedirectResult(this,(function(){return Promise.reject(e.t0)}));case 27:if(!a){e.next=31;break}return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(a));case 31:return e.abrupt("return",this.directlySetCurrentUser(null));case 32:return C(this._popupRedirectResolver,this,"argument-error"),e.next=35,this.getOrInitRedirectPersistenceManager();case 35:if(!this.redirectUser||this.redirectUser._redirectEventId!==a._redirectEventId){e.next=37;break}return e.abrupt("return",this.directlySetCurrentUser(a));case 37:return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(a));case 38:case"end":return e.stop()}}),e,this,[[18,23]])}))),function(e){return y.apply(this,arguments)})},{key:"tryRedirectSignIn",value:(m=Object(l.a)(b.a.mark((function e(t){var r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=null,e.prev=1,e.next=4,this._popupRedirectResolver._completeRedirectFn(this,t,!0);case 4:r=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),e.next=11,this._setRedirectUser(null);case 11:return e.abrupt("return",r);case 12:case"end":return e.stop()}}),e,this,[[1,7]])}))),function(e){return m.apply(this,arguments)})},{key:"reloadAndSetCurrentUserOrClear",value:(v=Object(l.a)(b.a.mark((function e(t){var r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ve(t);case 3:e.next=9;break;case 5:if(e.prev=5,e.t0=e.catch(0),(null===(r=e.t0)||void 0===r?void 0:r.code)==="auth/".concat("network-request-failed")){e.next=9;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 9:return e.abrupt("return",this.directlySetCurrentUser(t));case 10:case"end":return e.stop()}}),e,this,[[0,5]])}))),function(e){return v.apply(this,arguments)})},{key:"useDeviceLanguage",value:function(){this.languageCode=function(){if("undefined"==typeof navigator)return null;var e=navigator;return e.languages&&e.languages[0]||e.language||null}()}},{key:"_delete",value:(f=Object(l.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._deleted=!0;case 1:case"end":return e.stop()}}),e,this)}))),function(){return f.apply(this,arguments)})},{key:"updateCurrentUser",value:(c=Object(l.a)(b.a.mark((function e(t){var r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=t?Object(k.r)(t):null)&&C(r.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),e.abrupt("return",this._updateCurrentUser(r&&r._clone(this)));case 3:case"end":return e.stop()}}),e,this)}))),function(e){return c.apply(this,arguments)})},{key:"_updateCurrentUser",value:(u=Object(l.a)(b.a.mark((function e(t){var r,n=this,a=arguments;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=a.length>1&&void 0!==a[1]&&a[1],!this._deleted){e.next=3;break}return e.abrupt("return");case 3:if(t&&C(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),r){e.next=7;break}return e.next=7,this.beforeStateQueue.runMiddleware(t);case 7:return e.abrupt("return",this.queue(Object(l.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.directlySetCurrentUser(t);case 2:n.notifyAuthListeners();case 3:case"end":return e.stop()}}),e)})))));case 8:case"end":return e.stop()}}),e,this)}))),function(e){return u.apply(this,arguments)})},{key:"signOut",value:(o=Object(l.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.beforeStateQueue.runMiddleware(null);case 2:if(!this.redirectPersistenceManager&&!this._popupRedirectResolver){e.next=5;break}return e.next=5,this._setRedirectUser(null);case 5:return e.abrupt("return",this._updateCurrentUser(null,!0));case 6:case"end":return e.stop()}}),e,this)}))),function(){return o.apply(this,arguments)})},{key:"setPersistence",value:function(e){var t=this;return this.queue(Object(l.a)(b.a.mark((function r(){return b.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,t.assertedPersistence.setPersistence(U(e));case 2:case"end":return r.stop()}}),r)}))))}},{key:"_getPersistence",value:function(){return this.assertedPersistence.persistence.type}},{key:"_updateErrorMap",value:function(e){this._errorFactory=new k.b("auth","Firebase",e())}},{key:"onAuthStateChanged",value:function(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}},{key:"beforeAuthStateChanged",value:function(e,t){return this.beforeStateQueue.pushCallback(e,t)}},{key:"onIdTokenChanged",value:function(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}},{key:"toJSON",value:function(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}},{key:"_setRedirectUser",value:(s=Object(l.a)(b.a.mark((function e(t,r){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getOrInitRedirectPersistenceManager(r);case 2:return n=e.sent,e.abrupt("return",null===t?n.removeCurrentUser():n.setCurrentUser(t));case 4:case"end":return e.stop()}}),e,this)}))),function(e,t){return s.apply(this,arguments)})},{key:"getOrInitRedirectPersistenceManager",value:(i=Object(l.a)(b.a.mark((function e(t){var r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.redirectPersistenceManager){e.next=9;break}return C(r=t&&U(t)||this._popupRedirectResolver,this,"argument-error"),e.next=5,Se.create(this,[U(r._redirectPersistence)],"redirectUser");case 5:return this.redirectPersistenceManager=e.sent,e.next=8,this.redirectPersistenceManager.getCurrentUser();case 8:this.redirectUser=e.sent;case 9:return e.abrupt("return",this.redirectPersistenceManager);case 10:case"end":return e.stop()}}),e,this)}))),function(e){return i.apply(this,arguments)})},{key:"_redirectUserForId",value:(a=Object(l.a)(b.a.mark((function e(t){var r,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._isInitialized){e.next=3;break}return e.next=3,this.queue(Object(l.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))));case 3:if((null===(r=this._currentUser)||void 0===r?void 0:r._redirectEventId)!==t){e.next=5;break}return e.abrupt("return",this._currentUser);case 5:if((null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)!==t){e.next=7;break}return e.abrupt("return",this.redirectUser);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})},{key:"_persistUserIfCurrent",value:(n=Object(l.a)(b.a.mark((function e(t){var r=this;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==this.currentUser){e.next=2;break}return e.abrupt("return",this.queue(Object(l.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",r.directlySetCurrentUser(t));case 1:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"_notifyListenersIfCurrent",value:function(e){e===this.currentUser&&this.notifyAuthListeners()}},{key:"_key",value:function(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}},{key:"_startProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}},{key:"_stopProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}},{key:"_currentUser",get:function(){return this.currentUser}},{key:"notifyAuthListeners",value:function(){var e,t;if(this._isInitialized){this.idTokenSubscription.next(this.currentUser);var r=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}}},{key:"registerStateListener",value:function(e,t,r,n){var a=this;if(this._deleted)return function(){};var i="function"==typeof t?t:t.next.bind(t),s=this._isInitialized?Promise.resolve():this._initializationPromise;return C(s,this,"internal-error"),s.then((function(){return i(a.currentUser)})),"function"==typeof t?e.addObserver(t,r,n):e.addObserver(t)}},{key:"directlySetCurrentUser",value:(r=Object(l.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.currentUser&&this.currentUser!==t&&(this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh()),this.currentUser=t,!t){e.next=7;break}return e.next=5,this.assertedPersistence.setCurrentUser(t);case 5:e.next=9;break;case 7:return e.next=9,this.assertedPersistence.removeCurrentUser();case 9:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"queue",value:function(e){return this.operations=this.operations.then(e,e),this.operations}},{key:"assertedPersistence",get:function(){return C(this.persistenceManager,this,"internal-error"),this.persistenceManager}},{key:"_logFramework",value:function(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Ve(this.config.clientPlatform,this._getFrameworks()))}},{key:"_getFrameworks",value:function(){return this.frameworks}},{key:"_getAdditionalHeaders",value:(t=Object(l.a)(b.a.mark((function e(){var t,r,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object(d.a)({},"X-Client-Version",this.clientVersion),this.app.options.appId&&(r["X-Firebase-gmpid"]=this.app.options.appId),e.next=4,null===(t=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader();case 4:return(n=e.sent)&&(r["X-Firebase-Client"]=n),e.abrupt("return",r);case 7:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),e}();function qe(e){return Object(k.r)(e)}var He=function(){function e(t){var r=this;Object(h.a)(this,e),this.auth=t,this.observer=null,this.addObserver=Object(k.m)((function(e){return r.observer=e}))}return Object(p.a)(e,[{key:"next",get:function(){return C(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}]),e}();var Je=function(){function e(t,r){Object(h.a)(this,e),this.providerId=t,this.signInMethod=r}return Object(p.a)(e,[{key:"toJSON",value:function(){return L("not implemented")}},{key:"_getIdTokenResponse",value:function(e){return L("not implemented")}},{key:"_linkToIdToken",value:function(e,t){return L("not implemented")}},{key:"_getReauthenticationResolver",value:function(e){return L("not implemented")}}]),e}();function Ke(e,t){return Ge.apply(this,arguments)}function Ge(){return(Ge=Object(l.a)(b.a.mark((function e(t,r){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",G(t,"POST","/v1/accounts:update",r));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Be(e,t){return Xe.apply(this,arguments)}function Xe(){return(Xe=Object(l.a)(b.a.mark((function e(t,r){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Q(t,"POST","/v1/accounts:signInWithPassword",K(t,r)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ye(e,t){return Qe.apply(this,arguments)}function Qe(){return(Qe=Object(l.a)(b.a.mark((function e(t,r){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Q(t,"POST","/v1/accounts:signInWithEmailLink",K(t,r)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ze(e,t){return $e.apply(this,arguments)}function $e(){return($e=Object(l.a)(b.a.mark((function e(t,r){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Q(t,"POST","/v1/accounts:signInWithEmailLink",K(t,r)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var et=function(e){Object(s.a)(a,e);var t,r,n=_(a);function a(e,t,r){var i,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return Object(h.a)(this,a),(i=n.call(this,"password",r))._email=e,i._password=t,i._tenantId=s,i}return Object(p.a)(a,[{key:"toJSON",value:function(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}},{key:"_getIdTokenResponse",value:(r=Object(l.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",Be(t,{returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",Ye(t,{email:this._email,oobCode:this._password}));case 5:E(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"_linkToIdToken",value:(t=Object(l.a)(b.a.mark((function e(t,r){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",Ke(t,{idToken:r,returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",Ze(t,{idToken:r,email:this._email,oobCode:this._password}));case 5:E(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)}))),function(e,r){return t.apply(this,arguments)})},{key:"_getReauthenticationResolver",value:function(e){return this._getIdTokenResponse(e)}}],[{key:"_fromEmailAndPassword",value:function(e,t){return new a(e,t,"password")}},{key:"_fromEmailAndCode",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return new a(e,t,"emailLink",r)}},{key:"fromJSON",value:function(e){var t="string"==typeof e?JSON.parse(e):e;if((null==t?void 0:t.email)&&(null==t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}}]),a}(Je);function tt(e,t){return rt.apply(this,arguments)}function rt(){return(rt=Object(l.a)(b.a.mark((function e(t,r){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Q(t,"POST","/v1/accounts:signInWithIdp",K(t,r)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var nt=function(e){Object(s.a)(r,e);var t=_(r);function r(){var e;return Object(h.a)(this,r),(e=t.apply(this,arguments)).pendingToken=null,e}return Object(p.a)(r,[{key:"toJSON",value:function(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}},{key:"_getIdTokenResponse",value:function(e){return tt(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var r=this.buildRequest();return r.idToken=t,tt(e,r)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,tt(e,t)}},{key:"buildRequest",value:function(){var e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{var t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Object(k.E)(t)}return e}}],[{key:"_fromParams",value:function(e){var t=new r(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):E("argument-error"),t}},{key:"fromJSON",value:function(e){var t="string"==typeof e?JSON.parse(e):e,n=t.providerId,a=t.signInMethod,i=Object(y.a)(t,["providerId","signInMethod"]);if(!n||!a)return null;var s=new r(n,a);return s.idToken=i.idToken||void 0,s.accessToken=i.accessToken||void 0,s.secret=i.secret,s.nonce=i.nonce,s.pendingToken=i.pendingToken||null,s}}]),r}(Je);function at(e,t){return it.apply(this,arguments)}function it(){return(it=Object(l.a)(b.a.mark((function e(t,r){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",G(t,"POST","/v1/accounts:sendVerificationCode",K(t,r)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function st(){return(st=Object(l.a)(b.a.mark((function e(t,r){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Q(t,"POST","/v1/accounts:signInWithPhoneNumber",K(t,r)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ot(){return(ot=Object(l.a)(b.a.mark((function e(t,r){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Q(t,"POST","/v1/accounts:signInWithPhoneNumber",K(t,r));case 2:if(!(n=e.sent).temporaryProof){e.next=5;break}throw te(t,"account-exists-with-different-credential",n);case 5:return e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ut=Object(d.a)({},"USER_NOT_FOUND","user-not-found");function ct(){return(ct=Object(l.a)(b.a.mark((function e(t,r){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object.assign(Object.assign({},r),{operation:"REAUTH"}),e.abrupt("return",Q(t,"POST","/v1/accounts:signInWithPhoneNumber",K(t,n),ut));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var lt=function(e){Object(s.a)(r,e);var t=_(r);function r(e){var n;return Object(h.a)(this,r),(n=t.call(this,"phone","phone")).params=e,n}return Object(p.a)(r,[{key:"_getIdTokenResponse",value:function(e){return function(e,t){return st.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_linkToIdToken",value:function(e,t){return function(e,t){return ot.apply(this,arguments)}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}},{key:"_getReauthenticationResolver",value:function(e){return function(e,t){return ct.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_makeVerificationRequest",value:function(){var e=this.params,t=e.temporaryProof,r=e.phoneNumber,n=e.verificationId,a=e.verificationCode;return t&&r?{temporaryProof:t,phoneNumber:r}:{sessionInfo:n,code:a}}},{key:"toJSON",value:function(){var e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}}],[{key:"_fromVerification",value:function(e,t){return new r({verificationId:e,verificationCode:t})}},{key:"_fromTokenResponse",value:function(e,t){return new r({phoneNumber:e,temporaryProof:t})}},{key:"fromJSON",value:function(e){"string"==typeof e&&(e=JSON.parse(e));var t=e,n=t.verificationId,a=t.verificationCode,i=t.phoneNumber,s=t.temporaryProof;return a||n||i||s?new r({verificationId:n,verificationCode:a,phoneNumber:i,temporaryProof:s}):null}}]),r}(Je);var ht=function(){function e(t){var r,n,a,i,s,o;Object(h.a)(this,e);var u=Object(k.F)(Object(k.q)(t)),c=null!==(r=u.apiKey)&&void 0!==r?r:null,l=null!==(n=u.oobCode)&&void 0!==n?n:null,p=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(a=u.mode)&&void 0!==a?a:null);C(c&&l&&p,"argument-error"),this.apiKey=c,this.operation=p,this.code=l,this.continueUrl=null!==(i=u.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(s=u.languageCode)&&void 0!==s?s:null,this.tenantId=null!==(o=u.tenantId)&&void 0!==o?o:null}return Object(p.a)(e,null,[{key:"parseLink",value:function(t){var r=function(e){var t=Object(k.F)(Object(k.q)(e)).link,r=t?Object(k.F)(Object(k.q)(t)).deep_link_id:null,n=Object(k.F)(Object(k.q)(e)).deep_link_id;return(n?Object(k.F)(Object(k.q)(n)).link:null)||n||r||t||e}(t);try{return new e(r)}catch(n){return null}}}]),e}();var pt=function(){function e(){Object(h.a)(this,e),this.providerId=e.PROVIDER_ID}return Object(p.a)(e,null,[{key:"credential",value:function(e,t){return et._fromEmailAndPassword(e,t)}},{key:"credentialWithLink",value:function(e,t){var r=ht.parseLink(t);return C(r,"argument-error"),et._fromEmailAndCode(e,r.code,r.tenantId)}}]),e}();pt.PROVIDER_ID="password",pt.EMAIL_PASSWORD_SIGN_IN_METHOD="password",pt.EMAIL_LINK_SIGN_IN_METHOD="emailLink";var ft=function(){function e(t){Object(h.a)(this,e),this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}return Object(p.a)(e,[{key:"setDefaultLanguage",value:function(e){this.defaultLanguageCode=e}},{key:"setCustomParameters",value:function(e){return this.customParameters=e,this}},{key:"getCustomParameters",value:function(){return this.customParameters}}]),e}(),dt=function(e){Object(s.a)(r,e);var t=_(r);function r(){var e;return Object(h.a)(this,r),(e=t.apply(this,arguments)).scopes=[],e}return Object(p.a)(r,[{key:"addScope",value:function(e){return this.scopes.includes(e)||this.scopes.push(e),this}},{key:"getScopes",value:function(){return Object(f.a)(this.scopes)}}]),r}(ft),vt=function(e){Object(s.a)(r,e);var t=_(r);function r(){return Object(h.a)(this,r),t.call(this,"facebook.com")}return Object(p.a)(r,null,[{key:"credential",value:function(e){return nt._fromParams({providerId:r.PROVIDER_ID,signInMethod:r.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return r.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return r.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return r.credential(t.oauthAccessToken)}catch(n){return null}}}]),r}(dt);vt.FACEBOOK_SIGN_IN_METHOD="facebook.com",vt.PROVIDER_ID="facebook.com";var bt=function(e){Object(s.a)(r,e);var t=_(r);function r(){var e;return Object(h.a)(this,r),(e=t.call(this,"google.com")).addScope("profile"),e}return Object(p.a)(r,null,[{key:"credential",value:function(e,t){return nt._fromParams({providerId:r.PROVIDER_ID,signInMethod:r.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}},{key:"credentialFromResult",value:function(e){return r.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return r.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.oauthIdToken,a=t.oauthAccessToken;if(!n&&!a)return null;try{return r.credential(n,a)}catch(i){return null}}}]),r}(dt);bt.GOOGLE_SIGN_IN_METHOD="google.com",bt.PROVIDER_ID="google.com";var kt=function(e){Object(s.a)(r,e);var t=_(r);function r(){return Object(h.a)(this,r),t.call(this,"github.com")}return Object(p.a)(r,null,[{key:"credential",value:function(e){return nt._fromParams({providerId:r.PROVIDER_ID,signInMethod:r.GITHUB_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return r.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return r.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return r.credential(t.oauthAccessToken)}catch(n){return null}}}]),r}(dt);kt.GITHUB_SIGN_IN_METHOD="github.com",kt.PROVIDER_ID="github.com";var mt=function(e){Object(s.a)(r,e);var t=_(r);function r(){return Object(h.a)(this,r),t.call(this,"twitter.com")}return Object(p.a)(r,null,[{key:"credential",value:function(e,t){return nt._fromParams({providerId:r.PROVIDER_ID,signInMethod:r.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}},{key:"credentialFromResult",value:function(e){return r.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return r.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.oauthAccessToken,a=t.oauthTokenSecret;if(!n||!a)return null;try{return r.credential(n,a)}catch(i){return null}}}]),r}(dt);mt.TWITTER_SIGN_IN_METHOD="twitter.com",mt.PROVIDER_ID="twitter.com";var yt=function(){function e(t){Object(h.a)(this,e),this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}var t,r;return Object(p.a)(e,null,[{key:"_fromIdTokenResponse",value:(r=Object(l.a)(b.a.mark((function t(r,n,a){var i,s,o,u,c=arguments;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=c.length>3&&void 0!==c[3]&&c[3],t.next=3,Ie._fromIdTokenResponse(r,a,i);case 3:return s=t.sent,o=gt(a),u=new e({user:s,providerId:o,_tokenResponse:a,operationType:n}),t.abrupt("return",u);case 7:case"end":return t.stop()}}),t)}))),function(e,t,n){return r.apply(this,arguments)})},{key:"_forOperation",value:(t=Object(l.a)(b.a.mark((function t(r,n,a){var i;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r._updateTokensIfNecessary(a,!0);case 2:return i=gt(a),t.abrupt("return",new e({user:r,providerId:i,_tokenResponse:a,operationType:n}));case 4:case"end":return t.stop()}}),t)}))),function(e,r,n){return t.apply(this,arguments)})}]),e}();function gt(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}var Ot=function(e){Object(s.a)(r,e);var t=_(r);function r(e,n,a,s){var o,u;return Object(h.a)(this,r),(o=t.call(this,n.code,n.message)).operationType=a,o.user=s,Object.setPrototypeOf(Object(i.a)(o),r.prototype),o.customData={appName:e.name,tenantId:null!==(u=e.tenantId)&&void 0!==u?u:void 0,_serverResponse:n.customData._serverResponse,operationType:a},o}return Object(p.a)(r,null,[{key:"_fromErrorAndOperation",value:function(e,t,n,a){return new r(e,t,n,a)}}]),r}(k.c);function _t(e,t,r,n){return("reauthenticate"===t?r._getReauthenticationResolver(e):r._getIdTokenResponse(e)).catch((function(r){if(r.code==="auth/".concat("multi-factor-auth-required"))throw Ot._fromErrorAndOperation(e,r,t,n);throw r}))}function wt(e,t){return It.apply(this,arguments)}function It(){return(It=Object(l.a)(b.a.mark((function e(t,r){var n,a,i=arguments;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.length>2&&void 0!==i[2]&&i[2],e.t0=le,e.t1=t,e.t2=r,e.t3=t.auth,e.next=7,t.getIdToken();case 7:return e.t4=e.sent,e.t5=e.t2._linkToIdToken.call(e.t2,e.t3,e.t4),e.t6=n,e.next=12,(0,e.t0)(e.t1,e.t5,e.t6);case 12:return a=e.sent,e.abrupt("return",yt._forOperation(t,"link",a));case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function jt(e,t){return Tt.apply(this,arguments)}function Tt(){return(Tt=Object(l.a)(b.a.mark((function e(t,r){var n,a,i,s,o,u,c,l=arguments;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=l.length>2&&void 0!==l[2]&&l[2],i=t.auth,s="reauthenticate",e.prev=3,e.next=6,le(t,_t(i,s,r,t),n);case 6:return C((o=e.sent).idToken,i,"internal-error"),C(u=ce(o.idToken),i,"internal-error"),c=u.sub,C(t.uid===c,i,"user-mismatch"),e.abrupt("return",yt._forOperation(t,s,o));case 15:throw e.prev=15,e.t0=e.catch(3),(null===(a=e.t0)||void 0===a?void 0:a.code)==="auth/".concat("user-not-found")&&E(i,"user-mismatch"),e.t0;case 19:case"end":return e.stop()}}),e,null,[[3,15]])})))).apply(this,arguments)}function xt(e,t){return St.apply(this,arguments)}function St(){return(St=Object(l.a)(b.a.mark((function e(t,r){var n,a,i,s,o=arguments;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>2&&void 0!==o[2]&&o[2],a="signIn",e.next=4,_t(t,a,r);case 4:return i=e.sent,e.next=7,yt._fromIdTokenResponse(t,a,i);case 7:if(s=e.sent,n){e.next=11;break}return e.next=11,t._updateCurrentUser(s.user);case 11:return e.abrupt("return",s);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Rt(e,t){return G(e,"POST","/v2/accounts/mfaEnrollment:start",K(e,t))}new WeakMap;var Et=function(){function e(t,r){Object(h.a)(this,e),this.storageRetriever=t,this.type=r}return Object(p.a)(e,[{key:"_isAvailable",value:function(){try{return this.storage?(this.storage.setItem("__sak","1"),this.storage.removeItem("__sak"),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}},{key:"_set",value:function(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}},{key:"_get",value:function(e){var t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}},{key:"_remove",value:function(e){return this.storage.removeItem(e),Promise.resolve()}},{key:"storage",get:function(){return this.storageRetriever()}}]),e}();var Nt=function(e){Object(s.a)(o,e);var t,r,n,i=_(o);function o(){var e,t;return Object(h.a)(this,o),(e=i.call(this,(function(){return window.localStorage}),"LOCAL")).boundEventHandler=function(t,r){return e.onStorageEvent(t,r)},e.listeners={},e.localCache={},e.pollTimer=null,e.safariLocalStorageNotSynced=(Ne(t=Object(k.s)())||De(t))&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),e.fallbackToPolling=Fe(),e._shouldAllowMigration=!0,e}return Object(p.a)(o,[{key:"forAllChangedKeys",value:function(e){for(var t=0,r=Object.keys(this.listeners);t<r.length;t++){var n=r[t],a=this.storage.getItem(n),i=this.localCache[n];a!==i&&e(n,i,a)}}},{key:"onStorageEvent",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.key){var n=e.key;if(r?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){var a=this.storage.getItem(n);if(e.newValue!==a)null!==e.newValue?this.storage.setItem(n,e.newValue):this.storage.removeItem(n);else if(this.localCache[n]===e.newValue&&!r)return}var i=function(){var e=t.storage.getItem(n);(r||t.localCache[n]!==e)&&t.notifyListeners(n,e)},s=this.storage.getItem(n);Ue()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,10):i()}else this.forAllChangedKeys((function(e,r,n){t.notifyListeners(e,n)}))}},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var r=this.listeners[e];if(r)for(var n=0,a=Array.from(r);n<a.length;n++){(0,a[n])(t?JSON.parse(t):t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval((function(){e.forAllChangedKeys((function(t,r,n){e.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:n}),!0)}))}),1e3)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"attachListener",value:function(){window.addEventListener("storage",this.boundEventHandler)}},{key:"detachListener",value:function(){window.removeEventListener("storage",this.boundEventHandler)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}},{key:"_set",value:(n=Object(l.a)(b.a.mark((function e(t,r){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(a.a)(Object(u.a)(o.prototype),"_set",this).call(this,t,r);case 2:this.localCache[t]=JSON.stringify(r);case 3:case"end":return e.stop()}}),e,this)}))),function(e,t){return n.apply(this,arguments)})},{key:"_get",value:(r=Object(l.a)(b.a.mark((function e(t){var r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(a.a)(Object(u.a)(o.prototype),"_get",this).call(this,t);case 2:return r=e.sent,this.localCache[t]=JSON.stringify(r),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"_remove",value:(t=Object(l.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(a.a)(Object(u.a)(o.prototype),"_remove",this).call(this,t);case 2:delete this.localCache[t];case 3:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}]),o}(Et);Nt.type="LOCAL";var Pt=function(e){Object(s.a)(r,e);var t=_(r);function r(){return Object(h.a)(this,r),t.call(this,(function(){return window.sessionStorage}),"SESSION")}return Object(p.a)(r,[{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),r}(Et);Pt.type="SESSION";function At(e){return Promise.all(e.map(function(){var e=Object(l.a)(b.a.mark((function e(t){var r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t;case 3:return r=e.sent,e.abrupt("return",{fulfilled:!0,value:r});case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{fulfilled:!1,reason:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()))}var Ct=function(){function e(t){Object(h.a)(this,e),this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}var t;return Object(p.a)(e,[{key:"isListeningto",value:function(e){return this.eventTarget===e}},{key:"handleEvent",value:(t=Object(l.a)(b.a.mark((function e(t){var r,n,a,i,s,o,u,c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=(r=t).data,a=n.eventId,i=n.eventType,s=n.data,null==(o=this.handlersMap[i])?void 0:o.size){e.next=5;break}return e.abrupt("return");case 5:return r.ports[0].postMessage({status:"ack",eventId:a,eventType:i}),u=Array.from(o).map(function(){var e=Object(l.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t(r.origin,s));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=9,At(u);case 9:c=e.sent,r.ports[0].postMessage({status:"done",eventId:a,eventType:i,response:c});case 11:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"_subscribe",value:function(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}},{key:"_unsubscribe",value:function(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}],[{key:"_getInstance",value:function(t){var r=this.receivers.find((function(e){return e.isListeningto(t)}));if(r)return r;var n=new e(t);return this.receivers.push(n),n}}]),e}();function Lt(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,r="",n=0;n<t;n++)r+=Math.floor(10*Math.random());return e+r}Ct.receivers=[];var Mt=function(){function e(t){Object(h.a)(this,e),this.target=t,this.handlers=new Set}var t;return Object(p.a)(e,[{key:"removeMessageHandler",value:function(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}},{key:"_send",value:(t=Object(l.a)(b.a.mark((function e(t,r){var n,a,i,s,o=this,u=arguments;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=u.length>2&&void 0!==u[2]?u[2]:50,a="undefined"!=typeof MessageChannel?new MessageChannel:null){e.next=4;break}throw new Error("connection_unavailable");case 4:return e.abrupt("return",new Promise((function(e,u){var c=Lt("",20);a.port1.start();var l=setTimeout((function(){u(new Error("unsupported_event"))}),n);s={messageChannel:a,onMessage:function(t){var r=t;if(r.data.eventId===c)switch(r.data.status){case"ack":clearTimeout(l),i=setTimeout((function(){u(new Error("timeout"))}),3e3);break;case"done":clearTimeout(i),e(r.data.response);break;default:clearTimeout(l),clearTimeout(i),u(new Error("invalid_response"))}}},o.handlers.add(s),a.port1.addEventListener("message",s.onMessage),o.target.postMessage({eventType:t,eventId:c,data:r},[a.port2])})).finally((function(){s&&o.removeMessageHandler(s)})));case 5:case"end":return e.stop()}}),e)}))),function(e,r){return t.apply(this,arguments)})}]),e}();function Dt(){return window}function Ut(){return void 0!==Dt().WorkerGlobalScope&&"function"==typeof Dt().importScripts}function Ft(){return Vt.apply(this,arguments)}function Vt(){return(Vt=Object(l.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===navigator||void 0===navigator?void 0:navigator.serviceWorker){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,navigator.serviceWorker.ready;case 5:return t=e.sent,e.abrupt("return",t.active);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}var Wt="firebaseLocalStorageDb",zt=function(){function e(t){Object(h.a)(this,e),this.request=t}return Object(p.a)(e,[{key:"toPromise",value:function(){var e=this;return new Promise((function(t,r){e.request.addEventListener("success",(function(){t(e.request.result)})),e.request.addEventListener("error",(function(){r(e.request.error)}))}))}}]),e}();function qt(e,t){return e.transaction(["firebaseLocalStorage"],t?"readwrite":"readonly").objectStore("firebaseLocalStorage")}function Ht(){var e=indexedDB.deleteDatabase(Wt);return new zt(e).toPromise()}function Jt(){var e=indexedDB.open(Wt,1);return new Promise((function(t,r){e.addEventListener("error",(function(){r(e.error)})),e.addEventListener("upgradeneeded",(function(){var t=e.result;try{t.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(n){r(n)}})),e.addEventListener("success",Object(l.a)(b.a.mark((function r(){var n;return b.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if((n=e.result).objectStoreNames.contains("firebaseLocalStorage")){r.next=12;break}return n.close(),r.next=5,Ht();case 5:return r.t0=t,r.next=8,Jt();case 8:r.t1=r.sent,(0,r.t0)(r.t1),r.next=13;break;case 12:t(n);case 13:case"end":return r.stop()}}),r)}))))}))}function Kt(e,t,r){return Gt.apply(this,arguments)}function Gt(){return(Gt=Object(l.a)(b.a.mark((function e(t,r,n){var a,i;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=qt(t,!0).put((a={},Object(d.a)(a,"fbase_key",r),Object(d.a)(a,"value",n),a)),e.abrupt("return",new zt(i).toPromise());case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Bt(e,t){return Xt.apply(this,arguments)}function Xt(){return(Xt=Object(l.a)(b.a.mark((function e(t,r){var n,a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=qt(t,!1).get(r),e.next=3,new zt(n).toPromise();case 3:return a=e.sent,e.abrupt("return",void 0===a?null:a.value);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Yt(e,t){var r=qt(e,!0).delete(t);return new zt(r).toPromise()}var Qt=function(){function e(){Object(h.a)(this,e),this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((function(){}),(function(){}))}var t,r,n,a,i,s,o,u,c,f,d,v;return Object(p.a)(e,[{key:"_openDb",value:(v=Object(l.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.db){e.next=2;break}return e.abrupt("return",this.db);case 2:return e.next=4,Jt();case 4:return this.db=e.sent,e.abrupt("return",this.db);case 6:case"end":return e.stop()}}),e,this)}))),function(){return v.apply(this,arguments)})},{key:"_withRetries",value:(d=Object(l.a)(b.a.mark((function e(t){var r,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=0;case 1:return e.prev=2,e.next=5,this._openDb();case 5:return n=e.sent,e.next=8,t(n);case 8:return e.abrupt("return",e.sent);case 11:if(e.prev=11,e.t0=e.catch(2),!(r++>3)){e.next=15;break}throw e.t0;case 15:this.db&&(this.db.close(),this.db=void 0);case 16:e.next=1;break;case 18:case"end":return e.stop()}}),e,this,[[2,11]])}))),function(e){return d.apply(this,arguments)})},{key:"initializeServiceWorkerMessaging",value:(f=Object(l.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ut()?this.initializeReceiver():this.initializeSender());case 1:case"end":return e.stop()}}),e,this)}))),function(){return f.apply(this,arguments)})},{key:"initializeReceiver",value:(c=Object(l.a)(b.a.mark((function e(){var t=this;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.receiver=Ct._getInstance(Ut()?self:null),this.receiver._subscribe("keyChanged",function(){var e=Object(l.a)(b.a.mark((function e(r,n){var a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._poll();case 2:return a=e.sent,e.abrupt("return",{keyProcessed:a.includes(n.key)});case 4:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()),this.receiver._subscribe("ping",function(){var e=Object(l.a)(b.a.mark((function e(t,r){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",["keyChanged"]);case 1:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)}))),function(){return c.apply(this,arguments)})},{key:"initializeSender",value:(u=Object(l.a)(b.a.mark((function e(){var t,r,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ft();case 2:if(this.activeServiceWorker=e.sent,this.activeServiceWorker){e.next=5;break}return e.abrupt("return");case 5:return this.sender=new Mt(this.activeServiceWorker),e.next=8,this.sender._send("ping",{},800);case 8:if(n=e.sent){e.next=11;break}return e.abrupt("return");case 11:(null===(t=n[0])||void 0===t?void 0:t.fulfilled)&&(null===(r=n[0])||void 0===r?void 0:r.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0);case 12:case"end":return e.stop()}}),e,this)}))),function(){return u.apply(this,arguments)})},{key:"notifyServiceWorker",value:(o=Object(l.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.sender&&this.activeServiceWorker&&(r=void 0,((null===(r=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===r?void 0:r.controller)||null)===this.activeServiceWorker)){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50);case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(2);case 9:case"end":return e.stop()}var r}),e,this,[[2,7]])}))),function(e){return o.apply(this,arguments)})},{key:"_isAvailable",value:(s=Object(l.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,indexedDB){e.next=3;break}return e.abrupt("return",!1);case 3:return e.next=5,Jt();case 5:return t=e.sent,e.next=8,Kt(t,"__sak","1");case 8:return e.next=10,Yt(t,"__sak");case 10:return e.abrupt("return",!0);case 13:e.prev=13,e.t0=e.catch(0);case 15:return e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[0,13]])}))),function(){return s.apply(this,arguments)})},{key:"_withPendingWrite",value:(i=Object(l.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.pendingWrites++,e.prev=1,e.next=4,t();case 4:return e.prev=4,this.pendingWrites--,e.finish(4);case 7:case"end":return e.stop()}}),e,this,[[1,,4,7]])}))),function(e){return i.apply(this,arguments)})},{key:"_set",value:(a=Object(l.a)(b.a.mark((function e(t,r){var n=this;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(Object(l.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._withRetries((function(e){return Kt(e,t,r)}));case 2:return n.localCache[t]=r,e.abrupt("return",n.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)}))),function(e,t){return a.apply(this,arguments)})},{key:"_get",value:(n=Object(l.a)(b.a.mark((function e(t){var r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){return Bt(e,t)}));case 2:return r=e.sent,this.localCache[t]=r,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"_remove",value:(r=Object(l.a)(b.a.mark((function e(t){var r=this;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(Object(l.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r._withRetries((function(e){return Yt(e,t)}));case 2:return delete r.localCache[t],e.abrupt("return",r.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"_poll",value:(t=Object(l.a)(b.a.mark((function e(){var t,r,n,a,i,s,o,u,c,l,h;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){var t=qt(e,!1).getAll();return new zt(t).toPromise()}));case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",[]);case 5:if(0===this.pendingWrites){e.next=7;break}return e.abrupt("return",[]);case 7:r=[],n=new Set,a=w(t);try{for(a.s();!(i=a.n()).done;)s=i.value,o=s.fbase_key,u=s.value,n.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(u)&&(this.notifyListeners(o,u),r.push(o))}catch(p){a.e(p)}finally{a.f()}for(c=0,l=Object.keys(this.localCache);c<l.length;c++)h=l[c],this.localCache[h]&&!n.has(h)&&(this.notifyListeners(h,null),r.push(h));return e.abrupt("return",r);case 13:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var r=this.listeners[e];if(r)for(var n=0,a=Array.from(r);n<a.length;n++){(0,a[n])(t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval(Object(l.a)(b.a.mark((function t(){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e._poll());case 1:case"end":return t.stop()}}),t)}))),800)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}]),e}();Qt.type="LOCAL";function Zt(e,t){return G(e,"POST","/v2/accounts/mfaSignIn:start",K(e,t))}function $t(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}$t("rcb"),new W(3e4,6e4);function er(e,t,r){return tr.apply(this,arguments)}function tr(){return(tr=Object(l.a)(b.a.mark((function e(t,r,n){var a,i,s,o,u,c,l,h,p;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.verify();case 2:if(i=e.sent,e.prev=3,C("string"==typeof i,t,"argument-error"),C("recaptcha"===n.type,t,"argument-error"),!("session"in(s="string"==typeof r?{phoneNumber:r}:r))){e.next=26;break}if(o=s.session,!("phoneNumber"in s)){e.next=17;break}return C("enroll"===o.type,t,"internal-error"),e.next=13,Rt(t,{idToken:o.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:i}});case 13:return u=e.sent,e.abrupt("return",u.phoneSessionInfo.sessionInfo);case 17:return C("signin"===o.type,t,"internal-error"),C(c=(null===(a=s.multiFactorHint)||void 0===a?void 0:a.uid)||s.multiFactorUid,t,"missing-multi-factor-info"),e.next=22,Zt(t,{mfaPendingCredential:o.credential,mfaEnrollmentId:c,phoneSignInInfo:{recaptchaToken:i}});case 22:return l=e.sent,e.abrupt("return",l.phoneResponseInfo.sessionInfo);case 24:e.next=31;break;case 26:return e.next=28,at(t,{phoneNumber:s.phoneNumber,recaptchaToken:i});case 28:return h=e.sent,p=h.sessionInfo,e.abrupt("return",p);case 31:return e.prev=31,n._reset(),e.finish(31);case 34:case"end":return e.stop()}}),e,null,[[3,,31,34]])})))).apply(this,arguments)}var rr=function(){function e(t){Object(h.a)(this,e),this.providerId=e.PROVIDER_ID,this.auth=qe(t)}return Object(p.a)(e,[{key:"verifyPhoneNumber",value:function(e,t){return er(this.auth,e,Object(k.r)(t))}}],[{key:"credential",value:function(e,t){return lt._fromVerification(e,t)}},{key:"credentialFromResult",value:function(t){var r=t;return e.credentialFromTaggedObject(r)}},{key:"credentialFromError",value:function(t){return e.credentialFromTaggedObject(t.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.phoneNumber,n=t.temporaryProof;return r&&n?lt._fromTokenResponse(r,n):null}}]),e}();rr.PROVIDER_ID="phone",rr.PHONE_SIGN_IN_METHOD="phone";var nr=function(e){Object(s.a)(r,e);var t=_(r);function r(e){var n;return Object(h.a)(this,r),(n=t.call(this,"custom","custom")).params=e,n}return Object(p.a)(r,[{key:"_getIdTokenResponse",value:function(e){return tt(e,this._buildIdpRequest())}},{key:"_linkToIdToken",value:function(e,t){return tt(e,this._buildIdpRequest(t))}},{key:"_getReauthenticationResolver",value:function(e){return tt(e,this._buildIdpRequest())}},{key:"_buildIdpRequest",value:function(e){var t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}]),r}(Je);function ar(e){return xt(e.auth,new nr(e),e.bypassAuthState)}function ir(e){var t=e.auth,r=e.user;return C(r,t,"internal-error"),jt(r,new nr(e),e.bypassAuthState)}function sr(e){return or.apply(this,arguments)}function or(){return(or=Object(l.a)(b.a.mark((function e(t){var r,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.auth,C(n=t.user,r,"internal-error"),e.abrupt("return",wt(n,new nr(t),t.bypassAuthState));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ur=function(){function e(t,r,n,a){var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];Object(h.a)(this,e),this.auth=t,this.resolver=n,this.user=a,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(r)?r:[r]}var t;return Object(p.a)(e,[{key:"execute",value:function(){var e=this;return new Promise(function(){var t=Object(l.a)(b.a.mark((function t(r,n){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.pendingPromise={resolve:r,reject:n},t.prev=1,t.next=4,e.resolver._initialize(e.auth);case 4:return e.eventManager=t.sent,t.next=7,e.onExecution();case 7:e.eventManager.registerConsumer(e),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),e.reject(t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,r){return t.apply(this,arguments)}}())}},{key:"onAuthEvent",value:(t=Object(l.a)(b.a.mark((function e(t){var r,n,a,i,s,o,u;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.urlResponse,n=t.sessionId,a=t.postBody,i=t.tenantId,s=t.error,o=t.type,!s){e.next=4;break}return this.reject(s),e.abrupt("return");case 4:return u={auth:this.auth,requestUri:r,sessionId:n,tenantId:i||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState},e.prev=5,e.t0=this,e.next=9,this.getIdpTask(o)(u);case 9:e.t1=e.sent,e.t0.resolve.call(e.t0,e.t1),e.next=16;break;case 13:e.prev=13,e.t2=e.catch(5),this.reject(e.t2);case 16:case"end":return e.stop()}}),e,this,[[5,13]])}))),function(e){return t.apply(this,arguments)})},{key:"onError",value:function(e){this.reject(e)}},{key:"getIdpTask",value:function(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return ar;case"linkViaPopup":case"linkViaRedirect":return sr;case"reauthViaPopup":case"reauthViaRedirect":return ir;default:E(this.auth,"internal-error")}}},{key:"resolve",value:function(e){M(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}},{key:"reject",value:function(e){M(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}},{key:"unregisterAndCleanUp",value:function(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}]),e}(),cr=new W(2e3,1e4);var lr=function(e){Object(s.a)(a,e);var t,r,n=_(a);function a(e,t,r,s,o){var u;return Object(h.a)(this,a),(u=n.call(this,e,t,s,o)).provider=r,u.authWindow=null,u.pollId=null,a.currentPopupAction&&a.currentPopupAction.cancel(),a.currentPopupAction=Object(i.a)(u),u}return Object(p.a)(a,[{key:"executeNotNull",value:(r=Object(l.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.execute();case 2:return C(t=e.sent,this.auth,"internal-error"),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"onExecution",value:(t=Object(l.a)(b.a.mark((function e(){var t,r=this;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return M(1===this.filter.length,"Popup operations only handle one event"),t=Lt(),e.next=4,this.resolver._openPopup(this.auth,this.provider,this.filter[0],t);case 4:this.authWindow=e.sent,this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch((function(e){r.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(function(e){e||r.reject(N(r.auth,"web-storage-unsupported"))})),this.pollUserCancellation();case 9:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"eventId",get:function(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}},{key:"cancel",value:function(){this.reject(N(this.auth,"cancelled-popup-request"))}},{key:"cleanUp",value:function(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,a.currentPopupAction=null}},{key:"pollUserCancellation",value:function(){var e=this;!function t(){var r,n;(null===(n=null===(r=e.authWindow)||void 0===r?void 0:r.window)||void 0===n?void 0:n.closed)?e.pollId=window.setTimeout((function(){e.pollId=null,e.reject(N(e.auth,"popup-closed-by-user"))}),2e3):e.pollId=window.setTimeout(t,cr.get())}()}}]),a}(ur);lr.currentPopupAction=null;new Map;new W(3e4,6e4);new W(5e3,15e3),new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);var hr=function(e){Object(s.a)(r,e);var t=_(r);function r(e){var n;return Object(h.a)(this,r),(n=t.call(this,"phone")).credential=e,n}return Object(p.a)(r,[{key:"_finalizeEnroll",value:function(e,t,r){return function(e,t){return G(e,"POST","/v2/accounts/mfaEnrollment:finalize",K(e,t))}(e,{idToken:t,displayName:r,phoneVerificationInfo:this.credential._makeVerificationRequest()})}},{key:"_finalizeSignIn",value:function(e,t){return function(e,t){return G(e,"POST","/v2/accounts/mfaSignIn:finalize",K(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}],[{key:"_fromCredential",value:function(e){return new r(e)}}]),r}(function(){function e(t){Object(h.a)(this,e),this.factorId=t}return Object(p.a)(e,[{key:"_process",value:function(e,t,r){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,r);case"signin":return this._finalizeSignIn(e,t.credential);default:return L("unexpected MultiFactorSessionType")}}}]),e}());(function(){function e(){Object(h.a)(this,e)}return Object(p.a)(e,null,[{key:"assertion",value:function(e){return hr._fromCredential(e)}}]),e}()).FACTOR_ID="phone";var pr,fr="@firebase/auth",dr=function(){function e(t){Object(h.a)(this,e),this.auth=t,this.internalListeners=new Map}var t;return Object(p.a)(e,[{key:"getUid",value:function(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}},{key:"getToken",value:(t=Object(l.a)(b.a.mark((function e(t){var r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertAuthConfigured(),e.next=3,this.auth._initializationPromise;case 3:if(this.auth.currentUser){e.next=5;break}return e.abrupt("return",null);case 5:return e.next=7,this.auth.currentUser.getIdToken(t);case 7:return r=e.sent,e.abrupt("return",{accessToken:r});case 9:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"addAuthTokenListener",value:function(e){if(this.assertAuthConfigured(),!this.internalListeners.has(e)){var t=this.auth.onIdTokenChanged((function(t){var r;e((null===(r=t)||void 0===r?void 0:r.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}}},{key:"removeAuthTokenListener",value:function(e){this.assertAuthConfigured();var t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}},{key:"assertAuthConfigured",value:function(){C(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}},{key:"updateProactiveRefresh",value:function(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}]),e}();pr="Browser",Object(m.c)(new O.a("auth",(function(e,t){var r=t.options,n=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),i=n.options,s=i.apiKey,o=i.authDomain;return function(e,t){C(s&&!s.includes(":"),"invalid-api-key",{appName:e.name}),C(!(null==o?void 0:o.includes(":")),"argument-error",{appName:e.name});var n={apiKey:s,authDomain:o,clientPlatform:pr,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ve(pr)},a=new ze(e,t,n);return function(e,t){var r=(null==t?void 0:t.persistence)||[],n=(Array.isArray(r)?r:[r]).map(U);(null==t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(n,null==t?void 0:t.popupRedirectResolver)}(a,r),a}(n,a)}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((function(e,t,r){e.getProvider("auth-internal").initialize()}))),Object(m.c)(new O.a("auth-internal",(function(e){return function(e){return new dr(e)}(qe(e.getProvider("auth").getImmediate()))}),"PRIVATE").setInstantiationMode("EXPLICIT")),Object(m.e)(fr,"0.20.5",function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(pr)),Object(m.e)(fr,"0.20.5","esm2017")}}]);
//# sourceMappingURL=d4edeabb-1656f17c8d6b64a2d6f2.js.map